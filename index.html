<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>Добро пожаловать в магазин</h1>
    <button id="buyButton">Купить</button>

    <script>
        window.Telegram.WebApp.ready();

        // Обработчик кнопки "Купить"
        document.getElementById("buyButton").addEventListener("click", async function() {
            // В данном примере предполагается, что ваш бот генерирует ссылку на инвойс
            // Для упрощения мы генерируем ссылку вручную, но можно сделать запрос к вашему боту, чтобы получить реальную ссылку

            // Пример ссылки на инвойс (замените на реальную, генерируемую вашим ботом)
            const invoiceLink = "https://t.me/$nPxJ3n-UOEukDgAA8erjOqzO-Vc";  // Замените на реальную ссылку

            // Открываем инвойс
            window.Telegram.WebApp.openInvoice(invoiceLink, (status) => {
                if (status === "paid") {
                    // После успешной оплаты обновляем UI
                    alert("Покупка успешна! Ваш товар добавлен.");
                    // Обновите интерфейс, чтобы показать товар
                    document.body.innerHTML += '<img src="https://yourimageurl.com/product.jpg" alt="Product">';
                } else {
                    alert("Что-то пошло не так с оплатой.");
                }
            });
        });
    </script>
</body>
</html>
